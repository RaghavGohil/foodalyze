<!--Styles-->
<link rel="stylesheet" href="/css/product_info.css" />
<script>
  function toggleCollapsible(id) { var content = document.getElementById(id);
  var button = content.previousElementSibling; content.classList.toggle('open');
  button.querySelector('.arrow').classList.toggle('down-arrow');
  button.querySelector('.arrow').classList.toggle('up-arrow'); }
</script>
<script src="prod_info.js"></script>
<main class="container">
  <section class="product-info">
    <h1>"Your product has been decoded – explore your personalized Foodalyze
      insights now!"</h1>
    <div class="product-details">
      <div class="image-container">
        <img
          src="{{product.base64Image}}"
          alt="Product Image"
        />
        <div class="nutrition-scores">
          <div class="nutrition-score">
            <img
              src="https://static.openfoodfacts.org/images/attributes/dist/nutriscore-{{product.nutriScore}}-new-en.svg"
              alt="Nutri-Score"
            />
          </div>
          <div class="nutrition-score">
            <img
              src="https://static.openfoodfacts.org/images/attributes/dist/nova-group-{{product.novaScore}}.svg"
              alt="NOVA Group"
            />
          </div>
        </div>
      </div>
      <div class="details-container">
        <h2>{{{product.productName}}}</h2>
        <p><strong>Barcode Number:</strong>{{{product.barcode}}}</p>
        <p><strong>Brand Name:</strong> {{{product.brandName}}}</p>
        <p><strong>Packaging:</strong> {{{product.packagingDetails}}}</p>
        <p><strong>Categories:</strong>
          <span class="categories">{{{product.categories}}}</span></p>
        <div class="button-group">
          <button class="save-report">Save Report</button>
          <button class="share-report">Share Report</button>
        </div>
      </div>
    </div>
  </section>

  <section class="insights">

    <div class="ai-suggestions rounded-box">
      <div class="title">Summary</div>
      <div class="content">
        {{{aiResponse.summary}}}
      </div>
    </div>

    <div class="trust-flags">
      <div class="trust">
        <div class="title-bar">Ingredients to trust</div>
        <div class="content">
          {{{aiResponse.ingredientsToTrust}}}
        </div>
      </div>
      <div class="flags">
        <div class="title-bar">Ingredients that raise red flags</div>
        <div class="content">
          {{{aiResponse.ingredientsThatRaiseRedFlags}}}
        </div>
      </div>
    </div>

    <div class="personal-warnings rounded-box">
      <div class="title">⚠️ Personal Health Warnings</div>
      <ul>
        {{{aiResponse.healthWarnings}}}
      </ul>
    </div>

    <div class="alternatives rounded-box">
      <div class="title">Healthier Alternatives</div>
      <div class="content">
        {{{aiResponse.alternatives}}}
      </div>
    </div>

    <div class="collapsible-sections">
      <div class="collapsible">
        <button
          class="collapsible-button"
          onclick="toggleCollapsible('ingredients')"
        >
          All Ingredients
          <span class="arrow down-arrow">▼</span>
        </button>
        <div class="collapsible-content" id="ingredients">
            {{{aiResponse.ingredients}}}
        </div>
      </div>

      <div class="collapsible">
        <button
          class="collapsible-button"
          onclick="toggleCollapsible('nutrition')"
        >
          Nutrition Breakdown
          <span class="arrow down-arrow">▼</span>
        </button>
        <div class="collapsible-content" id="nutrition">
            {{{aiResponse.nutritionBreakdown}}}
        </div>
      </div>
    </div>
  </section>
</main>